import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks'
import { action } from '@storybook/addon-actions'
import { Avatar, AvatarList } from '@frontend/design-system'
import { take } from 'lodash'

# Avatar

<Meta title="Design system/Avatar" component={Avatar} />

`Avatar` should be provided an Entity with either an `avatar` url &mdash; which it will display as a regular image but square and round &mdash; or with an `email` that will be converted into a <a href="https://en.gravatar.com/site/implement/" target="_blank">Gravatar</a>.

Preferably, the image provided will be square, but if not, the middle part of the image will be shown.

If both an `avatar` and `email` are provided, the `avatar` will take priority.

If a `name` is provided for the entity, it will be used in the alt text, if no `alt` prop is passed in directly.

## With avatar URL

<Preview>
  <Story name="With avatar URL">
    <Avatar entity={{ avatar: 'http://placekitten.com/200/400' }} />
  </Story>
</Preview>

## With `email` (fetches gravatar)

<Preview>
  <Story name="With email">
    <Avatar entity={{ email: 'beau@automattic.com' }} />
  </Story>
</Preview>

## Default

This default is seen either if no gravatar is returned or if neither an email nor an avatar are provided as props.

<Preview>
  <Story name="Default">
    <Avatar entity={{}} />
    <br />
    <br />
    <Avatar entity={{ email: 'noavatarexists@cypress.io' }} />
  </Story>
</Preview>

## Props

<Props of={Avatar} />

# AvatarList

The AvatarList will show a '+' icon if either
a) `urls.length > maxShown` or
b) `total > maxShown`,

so if you may have more items than you want to show, you can either provide AvatarList with urls for all of them or instead only provide urls for the ones you want to display and then also include the total count as `total` so the component will know to display the '+'.

export const kittens = [
  { avatar: 'http://placekitten.com/200/400' },
  { avatar: 'http://placekitten.com/200/300' },
  { avatar: 'http://placekitten.com/200/200' },
]

export const mixed = [
  { avatar: 'http://placekitten.com/200/400' },
  { email: 'beau@automattic.com' },
  { avatar: 'http://placekitten.com/200/200' },
]

## Basic

<Preview>
  <Story name="AvatarList">
    <AvatarList entities={take(kittens, 2)} />
  </Story>
</Preview>

## Has more than provided (i.e. `total` > `urls.length`)

<Preview>
  <Story name="More than provided">
    <AvatarList entities={take(kittens, 2)} total={5} />
  </Story>
</Preview>

## Has `total` or `urls.length` more than `maxShown`

<Preview>
  <Story name="More than max">
    <AvatarList entities={kittens} maxShown={2} />
    <br />
    <AvatarList entities={take(kittens, 2)} maxShown={2} total={50} />
  </Story>
</Preview>

## Some with email, others with avatar URL

<Preview>
  <Story name="Some with email, others with avatar URL">
    <AvatarList entities={mixed} />
  </Story>
</Preview>

## Props

<Props of={AvatarList} />

# Options

## Configurable size

<Preview>
  <Story name="Configurable size">
    <div>
      Avatar: <br />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x16" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x24" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x32" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x48" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x64" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x80" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x96" />
      <Avatar entity={{ email: 'beau@automattic.com' }} size="x128" />
      <br />
      AvatarList: <br />
      <AvatarList
        entities={take(kittens, 2)}
        maxShown={1}
        size="x32"
        total={50}
      />
    </div>
  </Story>
</Preview>

## Configurable border color

Default is no border; if `hasBorder` is true, default border color is white

<Preview>
  <Story name="Configurable border color">
    <div style={{ backgroundColor: 'gray', padding: '8px' }}>
      <AvatarList
        entities={take(kittens, 2)}
        maxShown={1}
        size="x32"
        total={50}
      />
      <br />
      <Avatar entity={{ email: 'beau@automattic.com' }} hasBorder />{' '}
      <Avatar
        entity={{ email: 'beau@automattic.com' }}
        hasBorder
        borderColor="red"
      />{' '}
      <Avatar
        entity={{ email: 'beau@automattic.com' }}
        hasBorder
        borderColor="rgb(0, 255, 255)"
      />{' '}
      <Avatar
        entity={{ email: 'beau@automattic.com' }}
        hasBorder
        borderColor="#f07300"
      />
    </div>
  </Story>
</Preview>
