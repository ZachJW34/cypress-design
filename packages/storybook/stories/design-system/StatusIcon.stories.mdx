import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks'
import {
  StatusIcon,
  StatusIconV2,
  TestResultStatusIcon,
} from '@frontend/design-system'

<Meta title="Design system/StatusIcon" component={StatusIconV2} />

# StatusIcons

export const statuses = [
  { status: 'running', usedFor: 'Runs, specs, groups, test results' },
  { status: 'passed', usedFor: 'Runs, specs, groups, test results' },
  { status: 'failed', usedFor: 'Runs, specs, groups, test results' },
  { status: null, usedFor: 'Placeholder' },
  { status: 'cancelled', usedFor: 'Runs, specs, groups, test results' },
  { status: 'noTests', usedFor: 'Runs, specs, groups' },
  { status: 'errored', usedFor: 'Runs, specs, groups, test results' },
  { status: 'timedOut', usedFor: 'Runs, specs, groups, test results' },
  { status: 'overLimit', usedFor: 'Runs, specs, groups' },
  { status: 'unclaimed', usedFor: 'Specs' },
  { status: 'skipped', usedFor: 'Test results' },
  { status: 'pending', usedFor: 'Test results' },
]

export const sizes = ['x4', 'x8', 'x12', 'x16', 'x24']

## StatusIconV2

Note: StatusIconV2 will soon replace both StatusIcon and TestResultStatusIcon, but for now, the old ones can continue to be used as needed.

Runs, specs, and groups have one and only one of the following status: RUNNING, ERRORED, FAILED, TIMEDOUT, NOTESTS, PASSED, OVERLIMIT, or CANCELLED

Specs can also have status UNCLAIMED

Test results have one and only one of the following statuses: RUNNING, PENDING, SKIPPED, FAILED, PASSED, TIMEDOUT, ERRORED, or CANCELLED

Code example: `<StatusIconV2 status={status} variant="outline" size="x16" />`

To see the placeholder icon, pass no status: `<StatusIconV2 variant="outline" size="x16" />`

<Preview>
  <Story name="StatusIconV2">
    <div
      class="storybook-table"
      style={{
        gridTemplateColumns:
          'auto auto auto auto auto auto auto auto auto auto auto 1fr',
      }}
    >
      <div className="header">Status</div>
      <div
        className="header"
        style={{ gridColumn: `2 / span ${sizes.length}` }}
      >
        Outline Icon
      </div>
      <div
        className="header"
        style={{ gridColumn: `${sizes.length + 2} / span ${sizes.length}` }}
      >
        Solid Icon
      </div>
      <div className="header">Used for</div>
      <div></div>
      {sizes.map((size, i) => {
        return <div>{size}</div>
      })}
      {sizes.map((size, i) => {
        return <div>{size}</div>
      })}
      <div></div>
      {statuses.map((status, i) => {
        return (
          <div key={i} style={{ display: 'contents' }}>
            <div>{status.status || 'null (placeholder)'}</div>
            {sizes.map((size, i) => {
              return (
                <StatusIconV2
                  status={status.status}
                  variant="outline"
                  size={size}
                />
              )
            })}
            {sizes.map((size, i) => {
              return (
                <StatusIconV2
                  status={status.status}
                  variant="solid"
                  size={size}
                />
              )
            })}
            <div>{status.usedFor}</div>
          </div>
        )
      })}
    </div>
  </Story>
</Preview>

### Props

<Props of={StatusIconV2} />

## Run, Spec, and Group Status Icons

Note: These will be deprecated soon in favor of StatusIconV2

Note: Use RunStatusIcon only for runs, instances, specs, groups, and machines. Use TestResultStatusIcon for test results.

Runs have one and only one of the following status: RUNNING, ERRORED, FAILED, TIMEDOUT, NOTESTS, PASSED, OVERLIMIT, or CANCELLED

Specs can also have status UNCLAIMED

Note: To be consistent with spelling in the UI (and to match the docs and runners), only one 'l' should be used in 'canceled' in user-facing text, even though the backend always has it spelled with two.

export const runStatuses = [
  'unclaimed',
  'passed',
  'running',
  'failed',
  'errored',
  'noTests',
  'timedOut',
  'overLimit',
  'cancelled',
  'default (anything else)',
]

<Preview>
  <Story name="Status Icons (V1)">
    <div
      class="storybook-table"
      style={{ gridTemplateColumns: 'auto auto 1fr' }}
    >
      <div className="header">Status</div>
      <div className="header">Icon</div>
      <div className="header">Circle icon</div>
      {runStatuses.map((status) => {
        return (
          <>
            <div>{status}</div>
            <StatusIcon status={status} />
            <StatusIcon status={status} isCircle />
          </>
        )
      })}
    </div>
  </Story>
</Preview>

### StatusIcon

<Props of={StatusIcon} />

## Test Result Status Icons

Note: These will be deprecated soon in favor of StatusIconV2

Test results have one and only one of the following statuses: RUNNING, PENDING, SKIPPED, FAILED, PASSED, TIMEDOUT, ERRORED, or CANCELLED

Test results can also be flaky.

export const testStatuses = [
  'running',
  'pending',
  'skipped',
  'failed',
  'passed',
  'timedOut',
  'errored',
  'cancelled',
]

<Preview>
  <Story name="Test Result Status Icons (V1)">
    <div
      class="storybook-table"
      style={{ gridTemplateColumns: 'auto auto auto 1fr', color: '#17202c' }}
    >
      <div className="header">Status</div>
      <div className="header">Icon</div>
      <div className="header">Icon with tooltip</div>
      <div className="header">Icon with tooltip and build number</div>
      {testStatuses.map((status) => {
        return (
          <>
            <div>{status}</div>
            <TestResultStatusIcon status={status} />
            <TestResultStatusIcon status={status} hasTooltip />
            <TestResultStatusIcon
              status={status}
              hasTooltip
              buildNumber={Math.ceil(Math.random() * 100)}
            />
          </>
        )
      })}
    </div>
  </Story>
</Preview>

### Props

<Props of={TestResultStatusIcon} />
